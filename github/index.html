<!DOCTYPE html>
<html lang="de-de" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">


  
  
    
      
        <link rel="stylesheet" href="/wiki/css/base.310c3f33692bd45145a733205f51ddfbd54778b209899347b6bdb58722cc57d2.css" integrity="sha256-MQw/M2kr1FFFpzMgX1Hd&#43;9VHeLIJiZNHtr21hyLMV9I=" crossorigin="anonymous">
      
    
  




<meta name="description" content="">
<title>Github - hmaier-dev wiki</title>

</head>
<body class="bg-gray-800 w-100vw">

  <div class="wrapper ml-[15%] max-w-[1200px]">

    <header class="bg-gray-50">
      


  
  
  <div class="flex justify-between">
  
  
    <div>
      <a href="https://hmaier-dev.github.io/wiki/" class="mr-2">
        home
      </a>
      
      <a href="https://hmaier-dev.github.io/wiki//traefik" class="mr-2"
                    title="Because of Hugo's nature as a static site generator, this button isn't truly random.
      It just gets newly generated with every build of the site.">
        random article
      </a>
      <a href="https://github.com/hmaier-dev" class="mr-2">
        github
      </a>
    </div>

  
    <div>
    </div>

  </div>





    </header>

    <main class="bg-gray-50 p-3
    
      mb-6 min-h-[calc(100vh-1rem)] max-sm:text-sm
    ">
      

  <script>
document.body.addEventListener("keydown", (e) => {
  if (e.key === 'Backspace'){
    window.location.href = "https:\/\/hmaier-dev.github.io\/wiki\/ "
  }
});

</script>
 
  
  <h1>Github</h1>

  
<button onclick="toggleList()" class="px-4 py-1 bg-slate-700 text-slate-400 font-semibold hover:cursor-pointer">Table of contents</button>
<div id="toc-list" class="bg-gray-300 max-w-min text-nowrap overflow-x-hidden">
<nav id="TableOfContents">
  <ul>
    <li><a href="#actions">Actions</a>
      <ul>
        <li><a href="#setting-up-ssh-access-for-runner-to-vm">Setting up ssh access for runner to vm</a></li>
        <li><a href="#updating-static-html-on-vm">Updating static html on vm</a></li>
        <li><a href="#enabling-debugging-for-steps">Enabling debugging for steps</a></li>
      </ul>
    </li>
    <li><a href="#secrets">Secrets</a></li>
    <li><a href="#caching">Caching</a>
      <ul>
        <li><a href="#caching-docker-images">Caching Docker-Images</a></li>
        <li><a href="#caching-binaries">Caching binaries</a></li>
      </ul>
    </li>
    <li><a href="#packages">Packages</a></li>
    <li><a href="#how-this-wiki-works">How this wiki works</a>
      <ul>
        <li><a href="#committing-changes-to-the-private-repository">Committing Changes to the Private Repository</a></li>
        <li><a href="#syncing-to-the-public-repository">Syncing to the Public Repository</a>
          <ul>
            <li><a href="#access-token-setup">Access Token Setup</a></li>
          </ul>
        </li>
        <li><a href="#publishing-via-hugo">Publishing via Hugo</a>
          <ul>
            <li><a href="#earthly">Earthly</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
</div>

<script>
  function toggleList() {
      var list = document.getElementById("toc-list");
      list.classList.toggle("hidden");
  }
</script>


  
      
      <h2 id="actions">Actions<a href="/wiki/github/#actions" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h2>
<h3 id="setting-up-ssh-access-for-runner-to-vm">Setting up ssh access for runner to vm<a href="/wiki/github/#setting-up-ssh-access-for-runner-to-vm" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h3>
<p>You will need create a key-pair. On the runner you will need the private key and on the vm the public key.</p>
<ul>
<li><code>id_rsa</code> goes into e.g. <code>{{ secrets.SSH_KEY }}</code></li>
<li><code>id_rsa.pub</code> goes into ~/.ssh/authorized_keys on the vm</li>
</ul>
<p>Best practice would be to create the user on your local machine and distribute the keys from there.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>useradd deploy
</span></span><span style="display:flex;"><span>passwd deploy
</span></span><span style="display:flex;"><span>su deploy
</span></span><span style="display:flex;"><span>ssh-keygen -t ed25519 -a <span style="color:#ae81ff">200</span> -C <span style="color:#e6db74">&#34;runner@github.com&#34;</span>
</span></span><span style="display:flex;"><span>ls -la  ~/.ssh
</span></span></code></pre></div><h3 id="updating-static-html-on-vm">Updating static html on vm<a href="/wiki/github/#updating-static-html-on-vm" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h3>
<p>When ssh is setup right, you can over the files with <code>rsync</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rsync -rav ./public deploy@vm:~/&lt;dir-for-html&gt;
</span></span></code></pre></div><p>The deploying user (e.g. <code>deploy</code>) must be in the same group as nginx user (e.g. Group: <code>www-data</code>). You achieve this by:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>usermod -a -G www-data deploy
</span></span></code></pre></div><p>To ensure all files have the right ownership, set the <code>setgid</code>-bit on the <code>&lt;dir-for-html&gt;</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod -R g+s &lt;dir-for-html&gt;
</span></span></code></pre></div><h3 id="enabling-debugging-for-steps">Enabling debugging for steps<a href="/wiki/github/#enabling-debugging-for-steps" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h3>
<p>If you need more insign into, what is happening, you can enable debugging for the job.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">deploy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-24.04</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">ACTIONS_STEP_DEBUG</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><h2 id="secrets">Secrets<a href="/wiki/github/#secrets" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h2>
<p>When passing multi-line secrets, make sure to border the secret with <code>&quot;</code> like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>earthly --secret host<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>{ secrets.SSH_HOST <span style="color:#e6db74">}</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--secret username<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>{ secrets.SSH_USER <span style="color:#e6db74">}</span><span style="color:#f92672">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--secret key<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>{ secrets.SSH_KEY <span style="color:#e6db74">}</span><span style="color:#e6db74">}&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>+deploy-test
</span></span></code></pre></div><p>The <code>&quot;</code> keeps the format in it&rsquo;s right place.</p>
<h2 id="caching">Caching<a href="/wiki/github/#caching" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h2>
<p>With certain actions you can cache binaries or docker-images instead of downloading them each run. This makes your builds much faster.</p>
<h3 id="caching-docker-images">Caching Docker-Images<a href="/wiki/github/#caching-docker-images" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h3>
<p>This a action (there a many) you can use for caching a docker file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Cache Docker images for earthly</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">ScribeMD/docker-cache@0.5.0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">key</span>: <span style="color:#ae81ff">docker-${{ runner.os }}-${{ hashFiles(&#39;Earthfile&#39;) }}</span>
</span></span></code></pre></div><p>You can use the <code>hashfiles</code>-function to generate a unique hash, to keep your caches apart.
For generating the hash you should use the file, in which you declare your used image. In case of Docker that could be:</p>
<ul>
<li><code>docker-compose.yml</code></li>
<li><code>Dockerfile</code></li>
<li><code>Earthfile</code></li>
<li>etc.</li>
</ul>
<h3 id="caching-binaries">Caching binaries<a href="/wiki/github/#caching-binaries" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h3>
<p>For binaries the caching can be done, within some steps. In this example caching of the <code>earthly</code>-binary is done.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#75715e"># Step 1</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Setup cache for earthly binary</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">id</span>: <span style="color:#ae81ff">earthly-binary</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/cache@v4</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/opt/earthly/v0.8.13</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If version changes, a new binary will be downloaded</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">key</span>: <span style="color:#ae81ff">earthly-${{ runner.os }}-${{ env.EARTHLY_VERSION }}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Step 2</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Download Binary if Not Cached</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">if</span>: <span style="color:#ae81ff">steps.earthly-binary.outputs.cache-hit != &#39;true&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    mkdir -p &#34;$EARTHLY_PATH&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    curl -L -o &#34;$EARTHLY_PATH&#34;/earthly https://github.com/earthly/earthly/releases/download/$EARTHLY_VERSION/earthly-linux-amd64
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    chmod +x $EARTHLY_PATH/earthly</span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Step 3</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Add earthly to PATH</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">run</span>: <span style="color:#ae81ff">echo &#34;$EARTHLY_PATH&#34; &gt;&gt; $GITHUB_PATH</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Step 4</span>
</span></span><span style="display:flex;"><span>- <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Check if earthly is in path</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">run</span>: <span style="color:#ae81ff">earthly --version</span>
</span></span></code></pre></div><p>Step 2 will just run and download the binary, if no key has been found. A good place to store binaries that are not installed by
the systems package manager is <code>/opt</code>. In this example the semantic is <code>/opt/&lt;name&gt;/&lt;version&gt;</code> (e.g. <code>/opt/earthly/v0.8.13</code>).
Add the path to <code>$GITHUB_PATH</code> to make the binary everywhere available.</p>
<p>The key of the cache (Step 1) needs to have a unique part. So you can keep different version apart.
For the binary I just use the version number.</p>
<h2 id="packages">Packages<a href="/wiki/github/#packages" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h2>
<ul>
<li>Ressources: <a href="https://docs.github.com/en/packages/learn-github-packages/introduction-to-github-packages">https://docs.github.com/en/packages/learn-github-packages/introduction-to-github-packages</a></li>
</ul>
<h2 id="how-this-wiki-works">How this wiki works<a href="/wiki/github/#how-this-wiki-works" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h2>
<p>The wiki files are stored in my private dotfiles repository.
Since I prefer to keep this repository private, but GitHub Pages requires a public repository, I push the necessary files to a separate public repository for publishing.</p>
<h3 id="committing-changes-to-the-private-repository">Committing Changes to the Private Repository<a href="/wiki/github/#committing-changes-to-the-private-repository" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h3>
<p>Any changes made in <code>docs/vimwiki</code> are committed and pushed to the private remote repository.</p>
<h3 id="syncing-to-the-public-repository">Syncing to the Public Repository<a href="/wiki/github/#syncing-to-the-public-repository" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h3>
<p>A GitHub Actions workflow automates the process of syncing changes to the public repository. Here&rsquo;s how it works:</p>
<ul>
<li>
<p>The workflow clones the public wiki repository.</p>
</li>
<li>
<p>It updates the specified files based on a whitelist.</p>
</li>
<li>
<p>Finally, it commits and pushes the changes back to the public repository.</p>
</li>
</ul>
<p>The workflow located in <code>~/.github/workflow/wiki.yml</code> looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Update all wiki articles</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">push</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">branches</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">main</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">paths</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">docs/vimwiki/**</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">publish</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">defaults</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">run</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">working-directory</span>: <span style="color:#ae81ff">./docs/vimwiki</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">content</span>: <span style="color:#ae81ff">./wiki/content</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v4</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Cloning repo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#75715e"># Github personal access token </span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">TOKEN</span>: <span style="color:#ae81ff">${{ secrets.WIKI_REPO_TOKEN_RW }}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git config --global user.email &#34;&lt;&gt;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git config --global user.name &#34;Github Actions Runner&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git clone --single-branch --branch main \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              &#34;https://x-access-token:$TOKEN@github.com/hmaier-dev/wiki.git&#34; &#34;wiki&#34;</span>            
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Removing old files</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            find  $content -name &#39;*.md&#39; -type f -exec rm {} \;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            ls -la</span>            
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Copy over new files</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            # Whitelist of all publishable wiki articles
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            cp index.md $content
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            # some more markdown files...</span>            
</span></span><span style="display:flex;"><span>      <span style="color:#75715e"># Pushing to the public wiki</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Commit and push new files</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            cd wiki
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git checkout main
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git add .
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git diff-index --quiet HEAD || git commit -m &#34;Automatic wiki-publish&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git push origin main</span>            
</span></span></code></pre></div><h4 id="access-token-setup">Access Token Setup<a href="/wiki/github/#access-token-setup" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h4>
<p>To enable this process, you need a GitHub personal access token with repo permissions. You can generate one at <a href="https://github.com/settings/tokens">GitHub Settings &gt; Tokens</a>. When cloning the public repository, the token is passed as part of the URL, like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#ae81ff">git clone --single-branch --branch main \</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;https://x-access-token:$TOKEN@github.com/user/public-repo.git&#34;</span> <span style="color:#e6db74">&#34;repo&#34;</span>
</span></span></code></pre></div><h3 id="publishing-via-hugo">Publishing via Hugo<a href="/wiki/github/#publishing-via-hugo" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h3>
<p>When the changes arrive in the public-repository, the <code>publish.yml</code> workflow is triggered.
Running the workflow sets up <code>earthly</code> and uses it running hugo and publishes the generated html to the github-pages.</p>
<h4 id="earthly">Earthly<a href="/wiki/github/#earthly" class="font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline hover:text-gray-800" ariaLabel="Anchor">#</a> </h4>
<p>Earthly is like a Makefile for CI. All logic is declared in the <code>Earthfile</code>. This file enables me to declare different targets, which every of them spawns a docker-container.
By using Earthly I can run my CI locally without waiting for a runner.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Makefile" data-lang="Makefile"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">VERSION</span> <span style="color:#960050;background-color:#1e0010">0.8</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">hugo</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    FROM alpine:3.20
</span></span><span style="display:flex;"><span>    RUN apk add --no-cache hugo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Hugo cannot work in root (/)</span>
</span></span><span style="display:flex;"><span>    WORKDIR tmp
</span></span><span style="display:flex;"><span>    COPY content content
</span></span><span style="display:flex;"><span>    COPY static static
</span></span><span style="display:flex;"><span>    COPY hugo.toml hugo.toml
</span></span><span style="display:flex;"><span>    COPY layouts layouts
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    RUN mv content/index.md content/_index.md
</span></span><span style="display:flex;"><span>    RUN hugo
</span></span><span style="display:flex;"><span>    RUN ls -la public
</span></span><span style="display:flex;"><span>    SAVE ARTIFACT ./public AS LOCAL ./public
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">build</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    BUILD +hugo
</span></span></code></pre></div><p>The generated html-files are getting exporter to <code>./public</code>, which is the <code>publish_dir</code> for Github-Pages.</p>

  


    </main>
   
    <footer class="py-3 m-12 bg-gray-50 rounded">
      

  <div class="mb-3 flex justify-center">
    
    <a class="mx-3" href="/wiki/gitlab/">Previous Page</a>
    
    <a class="mx-3" href="https://hmaier-dev.github.io/wiki/">Go to Home</a>
    
    <a class="mx-3" href="/wiki/git/">Next Page</a>
    
  </div>



<div class="font-mono text-xs">
Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://tailwindcss.com/">Tailwind</a>. Hosted on Github-Pages by <a href="https://github.com/hmaier-dev/wiki">hmaier-dev/wiki</a>.
</div>

    <footer>

  </div>


</body>
</html>
